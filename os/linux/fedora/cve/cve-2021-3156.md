# sudo 权限提升漏洞
1月26日，Sudo发布安全通告，修复了一个类Unix操作系统在命令参数中转义反斜杠时存在基于堆的缓冲区溢出漏洞。
当sudo通过-s或-i命令行选项在shell模式下运行命令时，它将在命令参数中使用反斜杠转义特殊字符。
但使用-s或 -i标志运行sudoedit时，实际上并未进行转义，从而可能导致缓冲区溢出。
只要存在sudoers文件（通常是 /etc/sudoers），攻击者就可以使用本地普通用户利用sudo获得系统root权限。
目前漏洞细节已公开，请受影响的用户尽快采取措施进行防护。

## 漏洞复现
```
$ sudoedit -s /
```
若返回以“ sudoedit：/: not a regular file ”开头的错误，则当前系统可能存在安全风险。

不受影响的系统将显示以“ usage：”开头的错误响应。

## 漏洞处理
根据绿盟参考链接[unescap_overflow](https://www.sudo.ws/alerts/unescape_overflow.html)，
进入后找到`CVE ID`下的对应cve id 参考链接[CVE-2021-3156](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-3156)，
进入References的第一个URL链接: https://www.kb.cert.org/vuls/id/794544 ,
找到`Fedora projects`的Peferences链接：https://access.redhat.com/errata/RHSA-2021:0218?language=en ,
进入后找到修复的链接[BZ-1917684](https://bugzilla.redhat.com/show_bug.cgi?id=1917684)，
找到`Attachments`进行下载补丁文件，同时也能在当前页面的最底下看相关描述。


## 参考
[绿盟漏洞](http://blog.nsfocus.net/cve-2021-3156/)
