> C语言源程序的执行过程：预处理、编译、汇编、链接和执行。

本文目录
=================

* [一、预处理](#一预处理)
* [二、编译](#二编译)
* [三、汇编](#三汇编)
* [四、链接](#四链接)
* [五、运行](#五运行)


# 一、预处理
在这一阶段，源码中的所有预处理语句得到处理，例如：#include语句所包含的文件内容替换掉语句本身，所有已定义的宏被展开。

根据#ifdef，#if等语句的条件是否成立取舍相应的部分，预处理之后源码中不再包含任何预处理语句。

GCC预处理阶段可以生成.i的文件，通过选项-E可以使编译器在预处理结束时就停止编译。
```
gcc -E -o hello.i hello.c
```

# 二、编译
这一阶段，编译器对源码进行词法分析、语法分析、优化等操作，最后生成汇编代码。这是整个过程中最重要的一步，因此也常把整个过程称为编译。

可以通过选项-S使GCC在进行完编译后停止，生成.s的汇编程序。
```
gcc -S -o hello.s hello.c
```

# 三、汇编
这一阶段使用汇编器对汇编代码进行处理，生成机器语言代码，保存在后缀为.o的目标文件中。

当程序由多个代码文件构成时，每个文件都要先完成汇编工作，生成.o目标文件后，才能进入下一步的链接工作。

目标文件已经是最终程序的某一部分了，只是在链接之前还不能执行。可以通过-c选项生成目标文件。
```
gcc -c -o hello.o hello.c
```

# 四、链接
经过汇编以后的机器代码还不能直接运行。为了使操作系统能够正确加载可执行文件，文件中必须包含固定格式的信息头，还必须与系统提供的启动代码链接起来才能正常运行，这些工作都是由链接器来完成的。
```
gcc -o hello hello.c
```

# 五、运行
执行可执行文件。

